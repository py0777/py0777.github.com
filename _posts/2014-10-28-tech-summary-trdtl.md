---
title: "거래내역 통합방안"
categories:
  - Tech
tags: 
  - 거래내역통합
  - 증권
  - 금융IT
toc: true
toc_sticky: true
toc_label: 목차
popular: true
---

![image](https://py0777.github.io/assets/image/summary-trdtl/summary-trdtl_1.jpg)

![image](https://py0777.github.io/assets/image/summary-trdtl/summary-trdtl_2.jpg)

# **거래내역 통합방안**

### 왜 통합하려 하는가?

 - 거래내역을 기준으로 입출금, 입출고 내역이 쌓이면 두 테이블간 중복되는 데이터가 많습니다. 또한, 다른 업무쪽에서 거래내역과 연관관계를 맺기위해 거래번호, 출납번호, 대체번호 컬럼을 테이블에 추가해 관리해야 합니다. ASIS에선 상품별 거래내역간 중복된 항목이 많고, 거래내역을 참조하는 SQL 구현시 모든 거래내역을 UNION ALL해서 개발해야 하기때문에, 프로그램의 간결성이 떨어집니다.

### TOBE 거래내역 통합

 - 거래내역: 각 상품별 거래내역중 중복 및 공통사항을 관리(ex 적요코드, 거래금액, 거래수량 ..)
 - 위탁거래내역: 위탁, 선물옵션, CD, CP, 증권 저축거래내역 중 매매관련 사항 관리 (ex, 매매수량)
 - 수익증권거래내역: 수익증권거래내역 중 펀드, 외화 관련 사항 관리
 - 신탁거래내역: 신탁해지 및 신탁업무 관련
 - RP 거래내역: 위탁, RP, 수익증권거래내역 중 RP 약정 및 매매, 수익률 관련 사항
 - 연계거래내역: 대체 입출금고 내역을 통합 및 보완되었음. 대체및 이체거래 발생시 원거래와 상대거래간의 관계를 거래내역 PK로 관리함.
 - 거래번호 채번: ASIS와 달리 거래번호 채번테이블의 별도 관리함. ASIS는 계좌 MASTER테이블에 채번이 있어 해당 테이블을 LOCKING 함으로써 거래를 발생 시켰지만, TOBE는 채번테이블을 LOCKING 해서 거래를 발생 시킵니다. 일반적으로 계좌 MASTER는 거래번호 뿐 아니라 계좌와 관련된 여러 항목을 관리하기 때문에 ASIS에서는 계좌MASTER의 변동으로 인해 거래를 발생시킬 수 없는 상황이 발생가능한 구조 입니다.

※ 참고사항

 1. 위탁, 수익증권, 신탁, RP 거래내역은 각 업무파트에서 필요에 의해 등록해야 합니다.
 2. 각 거래내역 중 대출관련 사항은 대출 거래내역으로 이동
 3. 각 거래내역 중 미수관련 사항은 미수내역 및 미수변제내역으로 이동
 4. 입출금고내역은 거래내역과 통합되어, ASIS 테이블에서 출납번호를 관리햇다면 거래번호로 맵핑해야 합니다. 

### 통합시 장점

 1. 다른 업무 테이블에서 거래번호, 출납번호, 대체번호가 모두 추가될 필요없이 거래번호만 추가함으로써 데이터 연관관계를 유지할 수 있음.(관리의 용이성)
 2. 업무 변경 및 추가시 거래내역 공통테이블은 수정하지 않고 기타 거래내역(위탁,수익,신탁 등등.) 테이블에 컬럼추가 함으로써 업무별 영향도가 낮아집니다.
 3. ASIS는 계좌에서 입출금이 일어날 경우 계좌의 상품에따라 거래내역을 선별해서 읽어야 하지만, TOBE는 거래내역 테이블만 읽으면 되니 SQL 작성 및 관리의 용이성이 있습니다.