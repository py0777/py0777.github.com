---
  title: "증권사 거래코드 관리"
  categories:

    - Tech
  tags: 
    - 거래코드관ㄹ
    - 은행
    - 금융IT
  toc: true
  toc_sticky: true
  toc_label: 목차
  popular: true
---

# **증권사 거래코드 관리**

## **1. 개요**

: 입출금고를 발생시키는 거래의 거래코드 및 적요코드를 테이블로 관리하여, 이를 이용해 프로그램 간소화 및 유지보수를 용이하게함.

**- 거래코드란?**
1) 증권사 시스템의 TR CODE. 즉, 서비스 별로 고유의 코드 값을 부여해 제어목적으로 사용.
2) 증권사 ASIS시스템에선 주로 화면별 특징을 관리 했지만, 거래코드는 온라인 서비스와 배치, 외부기관으로부터 수신받아 처리하는 서비스도 관리 및 제어 가능함.  [ 한 화면에서 여러개의 서비스(거래코드)를 호출가능함.](http://www.py0777.com/63/)

**- 관리대상**
1) 입출금고를 발생시키는 거래 및 출금가능금액 제어시 사용

## **2. 테이블 구성**

![image](https://py0777.github.io/assets/image/trcd/trcd_1.jpg) 거래코드 및 적요코드 관리

거래코드: 거래코드의 특징 및 체크사항 입출금고 프로그램 INPUT 값 관리
적요코드: 예수금 및 잔고 변동사항 관리
거래적요코드: 거래코드와 적요코드를 맵핑해 출력 및 조회 용 인자내역 관리.

## **3. 거래코드 사용시 ASIS와 TOBE 비교**

**3-1 프로그램 변경사항**

ASIS

```plsql
IF WK_예수금 < 0 THEN
   IF IN.거래유형 ='111' THEN
        미수발생구분 = '0'
        미수유형 = '01'
   ELSE IF IN.거래유형 ='112' THEN
        미수발생구분 = '1'
        미수유형 = '02'
   ELSE IF IN.거래유형 ='113' THEN
        ...
   ELSE
        ERROR '미수불가 거래입니다.'
END IF
```

TOBE

```plsql
SELECT *
FROM 거래코드관리
WHERE 거래코드 = :IN.거래코드

IF WK_예수금 < 0 THEN
   IF 거래코드관리.미수발생여부 = 'N' THEN
      ERROR '미수불가 거래입니다.'
   END IF

   미수유형 = 거래코드관리.미수유형
   미수발생구분 = 거래코드관리.미수발생구분
END IF
```

**3-2. 프로그램 흐름**

ASIS

> INPUT 계좌번호, 적요코드, 거래금액 ...
> 1)매체 필수여부 검증
> 2) 타점 거래가능여부 검증
> 3) 입출금 내역 반영
> 4) 거래내역 반영 (TRIGGER)
> 5) 질권설정 여부 확인
> 6) 미수가능 적요검증
> 7) 미수발생처리
> \8. 출금제한 여부확인
> 9) 잔고변경
> ...

TOBE

> ****-검증 -
> INPUT 거래코드, 적요코드
> 1).거래코드, 적요코드 테이블 조회
> 2). 매체필수여부 검증
> 3). 타점거래가능여부 검증
>
> ****-처리-
> INPUT 거래코드,적요코드, 계좌번호, 거래금액
> 1) 채번
> 2) 거래코드, 적요코드 테이블 조회
> 3) 미수가능여부 검증
> 4) 미수유형할당
> 5) 수표출금가능여부검증
> 6) 잔고반영
> 7) 거래내역 반영
>
> ****-후처리-
> INPUT 거래코드, 적요코드
> 1) 거래적요코드 조회
> 2) 회계반영
> 3) 출력물 인자
> 4) SMS송신
>
>  

## **4. 장점 및 고려사항**

1) 거래코드 관리시 장점
\- 현업또는 타파트 추가요구사항, 변경사항 발생시 대응 용이(거래코드 테이블 갱신 및 등록)
\- 상품팩토리(RULE관리 패키지)에 비해 등록 및 변경하는 시간이 적게듬.
\- 출납 프로그램 호출시 INPUT 값 줄어듬.
\- 출납 프로그램 변경시 영향도 줄어듬.

2) 거래코드 관리시 고려사항
\- 처리성 거래에 대해선 1개의 거래코드는 1개의 역할을 해야함( 출금과 출금취소가 같은 거래코드를 사용하면 안됨.)
\- 거래코드 테이블관리는 출납이 하지만, 거래속성 정의는 요청파트에서 관리
\- 신규거래발생시 출납에 등록 요청